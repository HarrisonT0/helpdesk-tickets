{% extends "layout.html" %}

{% block title %}Tickets{% endblock %}

{% block content %}
    <div class="centered-container">
        <header>
            <h1>{% if user.admin %} All {% else %} My {% endif %} Tickets</h1>
            <a href="/tickets/new"><button><i class="bi bi-plus"></i> Create ticket</button></a>
        </header>

        {% if tickets %}
            <ul class="ticket-list">
            {% for ticket in tickets %}
                <li class="ticket-list-entry">
                    <h2><a href="/tickets/{{ ticket.id }}">{{ ticket.title }}</a></h2>
                    <br />
                    <footer>
                        <p><i class="bi bi-person"></i> Author: {{ ticket.author.email }}</p>
                        <p><i class="bi bi-clock"></i> Created at: {{ ticket.created_at.strftime("%B %d, %Y %I:%M %p") }}</p>
                    </footer>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No tickets found.</p>
        {% endif %}
    </div>
{% endblock %}

